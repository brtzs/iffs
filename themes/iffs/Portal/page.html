<tc_include file="header" />
<style>
    #article_content img{
        width: 100%;
    }
</style>
<div class="container" style="margin-top: 2em;">
    <div class="row">
        <php>
            // 获取文章分类id
            $term_id = $_GET['id'];

            // 获取左侧导航菜单
            $menu = sp_get_term($term_id);
            $menu_root = $menu['parent'];
            $terms_parent = sp_get_term($menu_root);
            $terms = sp_get_all_child_terms($menu_root);

            // 直接获取该分类中的第一篇文章
            $tag = 'cid:'.$term_id.'field:post_title,post_content;limit 1';
            $post = sp_sql_posts($tag);
        </php>
        <div class="col-md-3" style="padding-right: 0; padding-right: 1em;">
            <div class="list-group">
                <h3 class="list-group-item text-center" style="padding: 0.75em 0;">{$terms_parent['name']}</h3>
                <volist name="terms" id="vo">
                    <a href="{:leuu('list/index',array('id'=>$vo['term_id']))}" class="list-group-item">{$vo.name}</a>
                </volist>
                <volist name="posts" id="vo">
                    <if condition="($vo.istop eq 1) AND ($vo.recommended eq 1)"><a href="{:leuu('article/index',array('id'=>$vo['object_id'], 'cid'=>$vo['term_id']))}" class="list-group-item">{$vo.post_title|get_useful_title} <span class="label label-warning">置顶</span> <span class="label label-danger">重要</span><small class="pull-right">{$vo.post_date|strtotime|date="Y-m-d",###}</small></a>
                        <elseif condition="$vo.istop eq 1" /><a href="{:leuu('article/index',array('id'=>$vo['object_id'], 'cid'=>$vo['term_id']))}" class="list-group-item">{$vo.post_title|get_useful_title} <span class="label label-warning">置顶</span><small class="pull-right">{$vo.post_date|strtotime|date="Y-m-d",###}</small></a>
                        <elseif condition="$vo.recommended eq 1" /><a href="{:leuu('article/index',array('id'=>$vo['object_id'], 'cid'=>$vo['term_id']))}" class="list-group-item">{$vo.post_title|get_useful_title} <span class="label label-danger">重要</span><small class="pull-right">{$vo.post_date|strtotime|date="Y-m-d",###}</small></a>
                        <else /><a href="{:leuu('article/index',array('id'=>$vo['object_id'], 'cid'=>$vo['term_id']))}" class="list-group-item">{$vo.post_title|get_useful_title}<small class="pull-right">{$vo.post_date|strtotime|date="Y-m-d",###}</small></a>
                    </if>
                </volist>
            </div>
        </div>

        <div class="col-md-9">
            <div class="tc-box first-box article-box">
                <h2>{$post[0]['post_title']}</h2>
                <hr>
                <div id="article_content">
                    {$post[0]['post_content']}
                </div>
            </div>
        </div>
    </div>
</div>
<tc_include file="footer" />